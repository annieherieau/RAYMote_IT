<div class="container">
  <h1>Tableau de bord administrateur</h1>
  
  <%= render "nav_menu" %>
  
  
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="users" role="tabpanel" aria-labelledby="users-tab">
      <h2>Utilisateurs</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Nom</th>
            <th>Email</th>
            <th>Rôle</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><%= user.firstname %> <%= user.lastname %></td>
              <td><%= user.email %></td>
              <td><%= user.creator? ? 'Créateur' : 'Utilisateur' %></td>
              <td>
                <% if !user.creator? %>
                  <%= link_to "Supprimer", user_path(user), method: :delete, data: { confirm: "Êtes-vous sûr de vouloir supprimer cet utilisateur ?" }, class: "btn btn-danger btn-sm" %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <!-- WORSHOPS inscriptions -->
    <%= render partial: "workshops/index", locals: {workshops: @workshops} %>
    <!-- fin WORSHOPS inscriptions -->
    

    <div class="tab-pane fade" id="pending-workshops" role="tabpanel" aria-labelledby="pending-workshops-tab">
      <h2>Ateliers en attente de validation</h2>
      <% @workshops.where(validated: false).each do |workshop| %>
          <div class="card">
            <div class="card-body">
              <h5 class="card-title"><%= workshop.name %></h5>
              <p class="card-text"><%= workshop.description %></p>
              <a href="<%= workshop_path(workshop) %>" class="btn btn-primary">Voir</a>
              <%= button_to 'Valider cet atelier', validate_workshop_path(workshop), method: :patch, data: { confirm: 'Êtes-vous sûr ?' }, class: 'btn btn-primary' %>
            </div>
          </div>
        <% end %>
    </div>

    <div class="tab-pane fade" id="tags" role="tabpanel" aria-labelledby="tags-tab">
      <h2>Tags</h2>
      <ul>
        <% @tags.each do |tag| %>
          <li><%= tag.name %></li>
        <% end %>
      </ul>
    </div>

    <div class="tab-pane fade" id="categories" role="tabpanel" aria-labelledby="categories-tab">
      <h2>Catégories</h2>
      <ul>
        <% @categories.each do |category| %>
          <li><%= category.name %></li>
        <% end %>
      </ul>
    </div>

    <!-- AVIS -->
     <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="categories-tab">
    <%= render partial: "reviews/index", locals: {reviews: @reviews} %>
    </div>
    <!-- fin AVIS -->

  </div>
</div>
